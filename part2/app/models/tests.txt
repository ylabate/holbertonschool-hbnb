>>> from app.models.entity import Entity
>>> from app.models.user import User
>>> from app.models.amenity import Amenity
>>> from app.models.place import Place
>>> from app.models.review import Review
>>> import time
>>> from datetime import datetime

# Entity
>>> entity = Entity()
>>> isinstance(entity.id, str)
True
>>> len(entity.id) == 36
True
>>> isinstance(entity.created_at, datetime)
True
>>> isinstance(entity.updated_at, datetime)
True
>>> old_updated_at = entity.updated_at
>>> time.sleep(0.001)
>>> entity.save()
>>> entity.updated_at > old_updated_at
True

# User
>>> user = User("John", "Doe", "john@example.com", "password", False)
>>> user.first_name
'John'
>>> user.last_name
'Doe'
>>> user.email
'john@example.com'
>>> user.is_admin
False
>>> user.update({"first_name": "Jane"})
>>> user.first_name
'Jane'
>>> user.update({"email": "jane@example.com"})
>>> user.email
'jane@example.com'

# Amenity
>>> amenity = Amenity("WiFi", "High speed internet")
>>> amenity.name
'WiFi'
>>> amenity.description
'High speed internet'
>>> amenity.update({"name": "Fiber WiFi"})
>>> amenity.name
'Fiber WiFi'

# Place
>>> owner = User("Alice", "Smith", "alice@example.com", "password", True)
>>> place = Place("Cozy Apartment", "Near city center", "100", 40.7128, -74.0060, owner.id)
>>> place.title
'Cozy Apartment'
>>> place.price
100.0
>>> place.latitude
40.7128
>>> place.owner_id == owner.id
True
>>> place.add_amenity(amenity)
>>> len(place.amenities)
1
>>> place.amenities[0].name
'Fiber WiFi'

# Review
>>> review = Review("Great place!", 5, user, place)
>>> review.comment
'Great place!'
>>> review.rating
5
>>> review.user.first_name
'Jane'
>>> review.place.title
'Cozy Apartment'
>>> place.add_review(review)
>>> len(place.reviews)
1
>>> place.reviews[0].comment
'Great place!'

# Additional Tests
# ID Uniqueness
>>> user1 = User("U1", "L1", "u1@e.com", "pwd", False)
>>> user2 = User("U2", "L2", "u2@e.com", "pwd", False)
>>> user1.id != user2.id
True

# Multiple Relationships
>>> amenity2 = Amenity("Pool", "Swimming pool")
>>> place.add_amenity(amenity2)
>>> len(place.amenities)
2
>>> place.amenities[1].name
'Pool'

>>> user3 = User("Bob", "Brown", "bob@e.com", "pwd", False)
>>> review2 = Review("Nice pool!", 4, user3, place)
>>> place.add_review(review2)
>>> len(place.reviews)
2
>>> place.reviews[1].comment
'Nice pool!'
>>> place.reviews[1].rating
4

# Type Checks
>>> isinstance(review.rating, int)
True
>>> isinstance(place.latitude, float)
True

# updated_at changes after update()
>>> old_user_updated_at = user.updated_at
>>> time.sleep(0.001)
>>> user.update({"first_name": "UpdatedName"})
>>> user.updated_at > old_user_updated_at
True

>>> old_amenity_updated_at = amenity.updated_at
>>> time.sleep(0.001)
>>> amenity.update({"name": "Updated WiFi"})
>>> amenity.updated_at > old_amenity_updated_at
True

>>> old_place_updated_at = place.updated_at
>>> time.sleep(0.001)
>>> place.update({"title": "Updated Apartment"})
>>> place.updated_at > old_place_updated_at
True

# Boundary values - latitude
>>> place_lat_min = Place("Test", "Desc", 10.0, -90.0, 0.0, owner.id)
>>> place_lat_min.latitude
-90.0
>>> place_lat_max = Place("Test", "Desc", 10.0, 90.0, 0.0, owner.id)
>>> place_lat_max.latitude
90.0

# Boundary values - longitude
>>> place_lon_min = Place("Test", "Desc", 10.0, 0.0, -180.0, owner.id)
>>> place_lon_min.longitude
-180.0
>>> place_lon_max = Place("Test", "Desc", 10.0, 0.0, 180.0, owner.id)
>>> place_lon_max.longitude
180.0

# Boundary values - rating
>>> review_min = Review("Ok", 1, user, place)
>>> review_min.rating
1
>>> review_max = Review("Perfect", 5, user, place)
>>> review_max.rating
5

# Validation errors - User
>>> try:
...     User("", "Doe", "john@example.com", "password", False)
... except ValueError as e:
...     print(e)
first_name is required

>>> try:
...     User("A" * 51, "Doe", "john@example.com", "password", False)
... except ValueError as e:
...     print(e)
first_name must be at most 50 characters

>>> try:
...     User("John", "Doe", "invalid-email", "password", False)
... except ValueError as e:
...     print(e)
email format is invalid

# Validation errors - Place
>>> try:
...     Place("Test", "Desc", -10.0, 0.0, 0.0, owner.id)
... except ValueError as e:
...     print(e)
price must be a positive value

>>> try:
...     Place("Test", "Desc", 10.0, 91.0, 0.0, owner.id)
... except ValueError as e:
...     print(e)
latitude must be between -90.0 and 90.0

>>> try:
...     Place("Test", "Desc", 10.0, 0.0, 181.0, owner.id)
... except ValueError as e:
...     print(e)
longitude must be between -180.0 and 180.0

# Validation errors - Review
>>> try:
...     Review("Good", 0, user, place)
... except ValueError as e:
...     print(e)
rating must be between 1 and 5

>>> try:
...     Review("Good", 6, user, place)
... except ValueError as e:
...     print(e)
rating must be between 1 and 5

>>> try:
...     Review("Good", 3, "not_a_user", place)
... except TypeError as e:
...     print(e)
user must be a User instance

>>> try:
...     Review("Good", 3, user, "not_a_place")
... except TypeError as e:
...     print(e)
place must be a Place instance
